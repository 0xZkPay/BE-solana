# Solana ZK Pay Backend

## API Reference

### APIs

### On board

#### Returns flow ID and EULA which should be signed and send to authenticate API in order to get the PASETO and api_key which can be used for accessing all other APIs

```
  POST /on-board/flowid
```

| Parameter | Type     | Description                                                      |
| :-------- | :------- | :--------------------------------------------------------------- |
| `addr`    | `string` | **Required**. address for which to initiate verification process |

#### Returns PASETO and api_key which can be used for accessing all other APIs

```
  POST /on-board/verify
```

| Parameter    | Type     | Description                                                  |
| :----------- | :------- | :----------------------------------------------------------- |
| `flowid`     | `string` | **Required**. flow id received in `/flowid` api              |
| `public_key` | `string` | **Required**. address to verify                              |
| `signature`  | `string` | **Required**. signature generated by signing `flowid`+`eula` |


### Manage

Header `authorization` is required to access this apis.

#### Create a new payment flow with the expected amount to be received.

```
  POST /manage/api-key
```

| Parameter        | Type     | Description                                  |
| :--------------- | :------- | :------------------------------------------- |
| `amount_lamport` | `number` | **Required**. expected amount to be received |

### Core

Header `api_key` is required to access this apis.

#### Create a new payment flow with the expected amount to be received.

```
  POST /core/new-payment
```

#### Update the payment status by checking the latest transaction with expected amount

```
  POST /core/update-payment
```

| Parameter | Type     | Description                                                    |
| :-------- | :------- | :------------------------------------------------------------- |
| `addr`    | `string` | **Required**. the receiving address returned by `/new-payment` |
